# CLI

To list available commands, either run `era_test_node` with no parameters or execute `era_test_node help`

### Usage

```plaintext
Usage: era_test_node [OPTIONS] <COMMAND>
```

### Commands

<table><thead><tr><th width="188">Command</th><th>Description</th></tr></thead><tbody><tr><td><code>run</code></td><td>Starts a new empty local network</td></tr><tr><td><code>fork</code></td><td>Starts a local network that is a fork of another network</td></tr><tr><td><code>replay_tx</code></td><td>Starts a local network that is a fork of another network, and replays a given TX on it</td></tr><tr><td><code>help</code></td><td>Print this message or the help of the given subcommand(s)</td></tr></tbody></table>

### Options

<table><thead><tr><th width="215">Option</th><th width="313">Description</th><th>Default Value</th><th>Possible Values</th></tr></thead><tbody><tr><td><code>--port &#x3C;PORT></code></td><td>Port to listen on</td><td><code>8011</code></td><td></td></tr><tr><td><code>--show-calls &#x3C;SHOW_CALLS></code></td><td>Show call debug information</td><td><code>none</code></td><td><code>none</code>, <code>user</code>, <code>system</code>, <code>all</code></td></tr><tr><td><code>--show-storage-logs &#x3C;SHOW_STORAGE_LOGS></code></td><td>Show storage log information</td><td><code>none</code></td><td><code>none</code>, <code>read</code>, <code>write</code>, <code>all</code></td></tr><tr><td><code>--show-vm-details &#x3C;SHOW_VM_DETAILS></code></td><td>Show VM details information</td><td><code>none</code></td><td><code>none</code>, <code>all</code></td></tr><tr><td><code>--show-gas-details &#x3C;SHOW_GAS_DETAILS></code></td><td>Show Gas details information</td><td><code>none</code></td><td><code>none</code>, <code>all</code></td></tr><tr><td><code>--resolve-hashes</code></td><td>If true, the tool will try to contact openchain to resolve the ABI &#x26; topic names. It will make debug log more readable, but will decrease the performance</td><td></td><td></td></tr><tr><td><code>--dev-use-local-contracts</code></td><td>If true, will load the locally compiled system contracts (useful when doing changes to system contracts or bootloader)</td><td></td><td></td></tr><tr><td><code>--log &#x3C;LOG></code></td><td>Log filter level</td><td><code>info</code></td><td><code>trace</code>, <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code></td></tr><tr><td><code>--log-file-path &#x3C;LOG_FILE_PATH></code></td><td>Log file path</td><td><code>era_test_node.log</code></td><td></td></tr><tr><td><code>--cache &#x3C;CACHE></code></td><td>Cache type, can be one of <code>none</code>, <code>memory</code>, or <code>disk</code></td><td><code>disk</code></td><td><code>none</code>, <code>memory</code>, <code>disk</code></td></tr><tr><td><code>--reset-cache</code></td><td>If true, will reset the local <code>disk</code> cache</td><td></td><td></td></tr><tr><td><code>--cache-dir &#x3C;CACHE_DIR></code></td><td>Cache directory location for <code>disk</code> cache</td><td><code>.cache</code></td><td></td></tr><tr><td><code>-h, --help</code></td><td>Print help</td><td></td><td></td></tr><tr><td><code>-V, --version</code></td><td>Print version</td><td></td><td></td></tr></tbody></table>

### Make commands

To list available commands, run `make help` .&#x20;

<table><thead><tr><th width="176">Make Command</th><th width="120.33333333333331">Purpose</th><th>Documentation</th></tr></thead><tbody><tr><td><code>build-contracts</code></td><td>Build system contracts</td><td>- Change directory to <code>etc/system-contracts</code>.<br>- Install dependencies and build contracts.<br>- Run contract preprocessing and bootloader build.<br>- Execute <code>refresh_contracts.sh</code> script.</td></tr><tr><td><code>clean-contracts</code></td><td>Clean system contracts</td><td>- Change directory to <code>etc/system-contracts</code>.<br>- Clean the contract build artifacts.<br>- Remove the contract dependencies.</td></tr><tr><td><code>rebuild-contracts</code></td><td>Rebuild system contracts</td><td>- Change directory to <code>etc/system-contracts</code>.<br>- Rebuild contracts after cleaning.<br>- Run contract preprocessing and bootloader build.<br>- Execute <code>refresh_contracts.sh</code> script.</td></tr><tr><td><code>rust-build</code></td><td>Build the Rust project</td><td>- Build the Rust project in release mode.</td></tr><tr><td><code>run</code></td><td>Run locally</td><td>- Build the Rust project (if not already built).<br>- Execute the <code>era_test_node</code> binary in release mode.</td></tr><tr><td><code>build-%</code></td><td>Build for a specific target (CI)</td><td>- Build the Rust project for a specific target specified as <code>%</code>.<br>- Used primarily for Continuous Integration (CI).</td></tr><tr><td><code>rust-doc</code></td><td>Build Rust documentation</td><td>- Generate Rust documentation without dependencies.<br>- Open the generated documentation in a browser.</td></tr><tr><td><code>lint</code></td><td>Perform lint checks</td><td>- Change directory to <code>e2e-tests</code> and perform linting and formatting checks for JavaScript/TypeScript code.<br>- Run <code>cargo fmt</code> and <code>cargo clippy</code> for Rust code.</td></tr><tr><td><code>lint-fix</code></td><td>Fix lint errors</td><td>- Change directory to <code>e2e-tests</code> and fix linting and formatting issues for JavaScript/TypeScript code.<br>- Run <code>cargo fmt</code> and <code>cargo clippy</code> with fixes for Rust code.</td></tr><tr><td><code>test</code></td><td>Run unit tests for Rust code</td><td>- Run Rust unit tests using <code>cargo test</code>.</td></tr><tr><td><code>test-e2e</code></td><td>Run end-to-end tests</td><td>- Execute end-to-end tests against a running <code>era_test_node</code> using a provided script.</td></tr><tr><td><code>all</code></td><td>Build everything</td><td>- Build system contracts and the Rust project.</td></tr><tr><td><code>clean</code></td><td>Clean everything</td><td>- Clean system contracts and related artifacts.</td></tr><tr><td><code>new-release-tag</code></td><td>Create a new draft release tag</td><td>- Retrieve the version number from <code>Cargo.toml</code>.<br>- Create a new annotated Git tag with the version number.<br>- Provide instructions for pushing the tag to the repository.</td></tr></tbody></table>

### Environment Variables

Because `era_test_node` is developed using Rust, you can also use any environment variables used by Rust compiler. In particular, you may find these useful:

<table><thead><tr><th width="222.33333333333331">Environment Variable</th><th width="155">Purpose</th><th>Documentation</th></tr></thead><tbody><tr><td><code>CARGO_HOME</code></td><td>Cargo package directory</td><td>Set the directory where Cargo stores packages and metadata. Example: <code>CARGO_HOME=/path/to/custom/cargo</code>.</td></tr><tr><td><code>RUSTUP_HOME</code></td><td>Rustup toolchain directory</td><td>Set the directory where Rustup stores toolchains and settings. Example: <code>RUSTUP_HOME=/path/to/custom/rustup</code>.</td></tr><tr><td><code>RUST_BACKTRACE</code></td><td>Backtrace on errors and panics</td><td>Enable or disable backtraces for errors and panics. Example: <code>RUST_BACKTRACE=1</code>.</td></tr><tr><td><code>RUSTUP_TOOLCHAIN</code></td><td>Default Rust toolchain</td><td>Set the default Rust toolchain for the project. Example: <code>RUSTUP_TOOLCHAIN=stable</code>.</td></tr><tr><td><code>RUSTDOCFLAGS</code></td><td>Rust documentation flags</td><td>Pass flags to customize Rust documentation generation (rustdoc). Example: <code>RUSTDOCFLAGS="--theme=my_theme"</code>.</td></tr><tr><td><code>RUST_VERSION</code></td><td>Desired Rust version</td><td>Ensure a specific Rust version is used for building or running. Example: <code>RUST_VERSION=1.55.0</code>.</td></tr></tbody></table>

